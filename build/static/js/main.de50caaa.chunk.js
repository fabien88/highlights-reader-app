(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,n){e.exports=n(215)},119:function(e,t,n){},125:function(e,t){},127:function(e,t){},162:function(e,t,n){},163:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},213:function(e,t,n){},215:function(e,t,n){"use strict";n.r(t);var a=n(104),r=n(13),i=n(0),c=n.n(i),o=n(27),l=n.n(o),s=n(56),u=n.n(s),m=(n(119),n(86)),p=n(87),h=n(105),b=n(88),g=n(106),f=n(89),d=n.n(f),v=n(90),O=new(n.n(v).a)({minTime:500}),E={limit:1,type:"books"},y={},w=function(e,t,n,a){var r=t+"->"+n;y[r]||e[r]||(y[r]=!0,console.log("Searching for "+r),O.submit(d.a.search,t+" "+n,E,function(e,t){e||a(t[0].thumbnail)}))},j=(n(162),function(){return c.a.createElement("div",{className:"emptyThumbnail"})}),k=function(e){e.title,e.author;var t=e.thumbnailUrl;return t?c.a.createElement("img",{className:"thumbnail",alt:"thumb",src:t}):c.a.createElement(j,null)},S=(n(163),function(e){var t=e.children;return c.a.createElement("div",{className:"clipping"},t)}),C=function(e){var t=e.children;return c.a.createElement("div",{className:"header"},t)},P=function(e){var t=e.children;return c.a.createElement("span",{className:"title"},t)},N=function(e){var t=e.children;return c.a.createElement("span",{className:"author"},"by ",t)},x=function(){return c.a.createElement("div",{className:"separator"})},I=function(e){var t=e.children;return c.a.createElement("div",{className:"content"},t)},D=function(e){var t=e.children;return c.a.createElement("span",{className:"location"},"(Location ",t,")")},U=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"shouldComponentUpdate",value:function(e){return!(e.id===this.props.id&&e.showThumbnail===this.props.showThumbnail)}},{key:"render",value:function(){var e=this.props,t=e.thumbnailUrl,n=(e.showThumbnail,e.title),a=e.authors,r=e.content,i=e.loc;return c.a.createElement(S,null,c.a.createElement(C,null,c.a.createElement(k,{thumbnailUrl:t,title:n,author:a[0]}),c.a.createElement(P,null,n,c.a.createElement(N,null,a[0])),c.a.createElement(x,null)),c.a.createElement(I,null,r,c.a.createElement(D,null,i.split("-")[0])))}}]),t}(i.Component),V=n(91),T=n.n(V),R=n(92),B=(n(204),Object(R.virtualize)(T.a)),L=function(e){var t=e.thumbnails,n=e.currentIndex,a=e.randomClippings,r=e.onChangeIndex,i=e.settings,o=i.books,l=(i.randomSeed,a.filter(function(e){var t=e.title;return o[t].show}));return c.a.createElement(B,{enableMouseEvents:!0,resistance:!0,slideCount:l.length,onChangeIndex:r,index:Math.max(0,n),slideRenderer:function(e){e.key;var n=e.index;if(n<0||n>l.length-1)return null;var a=l[n],r=a.title,i=a.authors,o=a.content,s=a.loc;return c.a.createElement(U,{id:n,key:n,thumbnailUrl:t[r+"->"+i[0]],title:r,authors:i,content:o,loc:s})}})},z=n(237),M=n(238),F=n(94),$=n.n(F),A=n(95),J=n.n(A),X=n(96),q=n.n(X),G=(n(205),function(e){var t=e.currentView,n=e.setCurrentView;return c.a.createElement(z.a,{value:t,onChange:function(e,t){n(t)},showLabels:!0,className:"navigation"},c.a.createElement(M.a,{label:"Surlignements",icon:c.a.createElement($.a,null),value:"highlights"}),c.a.createElement(M.a,{label:"Favoris",value:"favorite",icon:c.a.createElement(J.a,null)}),c.a.createElement(M.a,{label:"R\xe9glages",value:"settings",icon:c.a.createElement(q.a,null)}))}),H=(n(32),n(103)),K=n(57),Q=n.n(K),W=n(39),Y=n.n(W),Z=n(244),_=n(239),ee=n(42),te=n(3),ne=n(97),ae=n.n(ne),re=n(99),ie=n.n(re),ce=n(100),oe=n.n(ce),le=n(101),se=n.n(le),ue=n(240),me=n(241),pe=n(243),he=n(242),be=n(98),ge=n.n(be),fe={success:ae.a,warning:ge.a,error:ie.a,info:oe.a},de=Object(_.a)(function(e){return{success:{backgroundColor:ue.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:me.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}});var ve=function(e){var t=de(),n=e.className,a=e.message,r=e.onClose,i=e.variant,o=(e.onCloseButtonClick,Object(ee.a)(e,["className","message","onClose","variant","onCloseButtonClick"])),l=fe[i];return c.a.createElement(he.a,Object.assign({className:Object(te.a)(t[i],n),"aria-describedby":"client-snackbar",message:c.a.createElement("span",{id:"client-snackbar",className:t.message},c.a.createElement(l,{className:Object(te.a)(t.icon,t.iconVariant)}),a),action:[c.a.createElement(pe.a,{key:"close","aria-label":"close",color:"inherit",onClick:r},c.a.createElement(se.a,{className:t.icon}))]},o))},Oe=n(217),Ee=n(107),ye=Object(_.a)(function(e){return{root:{padding:e.spacing(3,2),margin:e.spacing(1)}}});function we(e){var t=e.header,n=e.children,a=ye();return c.a.createElement("div",null,c.a.createElement(Oe.a,{className:a.root},c.a.createElement(Ee.a,{variant:"h5",component:"h3"},t),c.a.createElement(Ee.a,{component:"div"},n)))}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Se=Object(_.a)(function(e){return{button:{margin:e.spacing(1)},rightIcon:{marginBottom:-7,marginLeft:e.spacing(1)},iconSmall:{fontSize:20},margin:{margin:e.spacing(1)}}}),Ce=function(e){e.setSettings;var t=e.setState,n=e.settings,a=e.thumbnails,r=e.updateThumbnails,i=n.isShowUploadSuccessfull;console.log({isShowUploadSuccessfull:i});var o=Se();return c.a.createElement(we,{header:"Import des Clippings"},c.a.createElement("form",null,c.a.createElement(Z.a,{variant:"contained",color:"primary",className:o.button},c.a.createElement("label",{htmlFor:"fileupload"},'Charger le fichier "My Clippings.txt"',c.a.createElement(Y.a,{className:o.rightIcon}))),c.a.createElement("input",{className:"inputFile",id:"fileupload",type:"file",onChange:function(e){var i=e.target.files[0],c=new FileReader;c.addEventListener("load",function(e){var i=function(e){return Q()(e,"fr")}(e.target.result),c=function(e){for(var t=e.map(function(e){return e.title}),n=e.reduce(function(e,t){var n=t.title,a=t.authors;return e[n]={title:n,author:a[0]},e},{}),a={},r=0,i=Object(H.a)(new Set(t));r<i.length;r++){var c=i[r];a[c]={title:c,author:n[c].author,show:!0}}return a}(i),o=i.map(function(e){return[Math.random(),e]}).sort(function(e,t){return e[0]-t[0]}).map(function(e){return e[1]});t({clippings:i,randomClippings:o,settings:ke({},n,{books:c,isShowUploadSuccessfull:!0}),currentIndex:0});for(var l=function(){var e=u[s],t=e.title,n=e.author,i=t+"->"+n;w(a,t,n,function(e){r(i,e)})},s=0,u=Object.values(c);s<u.length;s++)l()}),c.readAsText(i)}})),i&&c.a.createElement(ve,{variant:"success",className:o.margin,message:"Import r\xe9ussi !",onClose:function(){return t({settings:ke({},n,{isShowUploadSuccessfull:!1})})}}))},Pe=n(102),Ne=n.n(Pe),xe=Object(_.a)(function(e){return{button:{margin:e.spacing(1)},rightIcon:{marginLeft:e.spacing(1)},iconSmall:{fontSize:20},margin:{margin:e.spacing(1)}}}),Ie=function(e){var t=e.resetState,n=xe();return c.a.createElement(we,{header:"R\xe9initialiser l'application"},c.a.createElement(Z.a,{onClick:t,variant:"contained",color:"secondary",className:n.button},"R\xe9initialiser tous les r\xe9glages",c.a.createElement(Ne.a,{className:n.rightIcon})))},De=n(4),Ue=n(245),Ve=n(246),Te=Object(De.a)(function(e){return{root:{width:42,height:29,padding:0,margin:e.spacing(1),display:"flex",justifyContent:"space-between"},switchBase:{padding:1,"&$checked":{transform:"translateX(16px)",color:e.palette.common.white,"& + $track":{backgroundColor:"#52d869",opacity:1,border:"none",height:26}},"&$focusVisible $thumb":{color:"#52d869",border:"6px solid #fff"}},thumb:{width:24,height:24},track:{borderRadius:13,border:"1px solid ".concat(e.palette.grey[400]),backgroundColor:e.palette.grey[50],opacity:1,height:25,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{}}})(function(e){var t=e.classes,n=Object(ee.a)(e,["classes"]);return c.a.createElement(Ve.a,Object.assign({focusVisibleClassName:t.focusVisible,disableRipple:!0,classes:{root:t.root,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked}},n))}),Re=Object(_.a)(function(e){return{label:{width:"100%"}}});function Be(e){var t=e.checked,n=e.onChange,a=e.label,r=Re();return c.a.createElement(Ue.a,{style:{width:"100%"},control:c.a.createElement(Te,{checked:t,onChange:function(){return n(!t)},value:"checkedB"}),labelPlacement:"start",label:a,classes:{label:r.label}})}n(213);function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Me=function(e,t){var n=e.title.toLowerCase(),a=t.title.toLowerCase();return n<a?-1:n>a?1:0},Fe=function(e){var t=e.title,n=e.author,a=e.thumbnailUrl;return c.a.createElement("div",null,c.a.createElement(k,{title:t,author:n,thumbnailUrl:a}),c.a.createElement("div",{className:"title"},t))},$e=function(e){var t=e.books,n=void 0===t?{}:t,a=e.setSettings,i=e.thumbnails;return c.a.createElement(we,{header:"Livres affich\xe9s"},Object.values(n).sort(Me).map(function(e){return c.a.createElement(Be,{key:e.title,checked:e.show,label:c.a.createElement(Fe,{title:e.title,author:e.author,thumbnailUrl:i[e.title+"->"+e.author]}),onChange:(t=e.title,o=e,function(e){var i=ze({},o,{show:e}),c=Object(r.a)({},t,i);a({books:ze({},n,{},c)})})});var t,o}))},Ae=Object(_.a)(function(e){return{button:{margin:e.spacing(1)},rightIcon:{marginBottom:-7,marginLeft:e.spacing(1)},iconSmall:{fontSize:20},margin:{margin:e.spacing(1)}}}),Je=function(e){var t=e.clippings,n=e.setState,a=Ae();return c.a.createElement(we,{header:"Surlignements al\xe9atoires"},c.a.createElement(Z.a,{onClick:function(e){var a=t.map(function(e){return[Math.random(),e]}).sort(function(e,t){return e[0]-t[0]}).map(function(e){return e[1]});n({randomClippings:a,currentIndex:0,currentView:"highlights"})},variant:"contained",color:"primary",className:a.button},"Voir les surlignements en al\xe9atoire"))};function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ge={isShowUploadSuccessfull:!1},He=function(e){for(var t=e.setState,n=e.resetState,a=e.settings,r=void 0===a?Ge:a,i=e.thumbnails,o=e.updateThumbnails,l=e.clippings,s=function(e){t({settings:qe({},r,{},e)})},u=r.books,m=void 0===u?{}:u,p=function(){var e=b[h],t=e.title,n=e.author,a=t+"->"+n;w(i,t,n,function(e){o(a,e)})},h=0,b=Object.values(m);h<b.length;h++)p();return c.a.createElement("div",{className:"settings"},c.a.createElement("h1",null,"R\xe9glages"),c.a.createElement(Ce,{settings:r,setState:t,setSettings:s,updateThumbnails:o,thumbnails:i}),c.a.createElement(Je,{clippings:l,setState:t}),c.a.createElement($e,{books:m,setSettings:s,thumbnails:i}),c.a.createElement(Ie,{resetState:n}))};function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(214).install();var We={clippings:[],randomClippings:[],currentIndex:0,thumbnails:{},currentView:"highlights",settings:{books:{},randomSeed:0}},Ye=Qe({},We,{},u.a.get("state"));function Ze(e,t){var n=Qe({},e);switch(t.type){case"resetState":n=We;break;case"setState":n=Qe({},n,{},t.args);break;case"setThumbnail":n=Qe({},n,{thumbnails:Qe({},e.thumbnails,Object(r.a)({},t.key,t.thumbnailUrl))})}return setTimeout(function(){return u.a.set("state",n)},500),n}var _e=document.getElementById("root");l.a.render(c.a.createElement(function(){var e=Object(i.useReducer)(Ze,Ye),t=Object(a.a)(e,2),n=t[0],o=t[1],l=n.clippings,s=n.randomClippings,u=n.currentIndex,m=n.thumbnails,p=n.currentView,h=function(e){o({type:"setState",args:e})},b=function(e){console.log({currentIndex:e}),h({currentIndex:e})},g=function(){console.log("state reset"),o({type:"resetState"})},f=function(e,t){o({type:"setThumbnail",key:e,thumbnailUrl:t})};return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"view"},c.a.createElement(function(){switch(p){case"settings":return c.a.createElement(He,Object(r.a)({setState:h,resetState:g,settings:n.settings,clippings:n.clippings,thumbnails:m,updateThumbnails:f},"clippings",l));case"highlights":return c.a.createElement(L,{thumbnails:m,randomClippings:s,currentIndex:u,updateThumbnails:f,onChangeIndex:b,settings:n.settings});default:return null}},null)),c.a.createElement(G,{currentView:p,setCurrentView:function(e){return h({currentView:e})}}))},null),_e)},32:function(e,t,n){}},[[112,1,2]]]);
//# sourceMappingURL=main.de50caaa.chunk.js.map