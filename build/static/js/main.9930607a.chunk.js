(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,n){e.exports=n(219)},121:function(e,t,n){},127:function(e,t){},129:function(e,t){},164:function(e,t,n){},165:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var a=n(106),r=n(14),i=n(0),o=n.n(i),c=n(28),l=n.n(c),s=n(57),u=n.n(s),m=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function g(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(121);var f=n(87),p=n(88),h=n(107),d=n(89),b=n(108),v=n(90),O=n.n(v),y=n(91),E=new(n.n(y).a)({minTime:500}),w={limit:1,type:"books"},j={},k=function(e,t,n,a){var r=t+"->"+n;j[r]||e[r]||(j[r]=!0,console.log("Searching for "+r),E.submit(O.a.search,t+" "+n,w,function(e,t){e||a(t[0].thumbnail)}))},S=(n(164),function(){return o.a.createElement("div",{className:"emptyThumbnail"})}),C=function(e){e.title,e.author;var t=e.thumbnailUrl;return t?o.a.createElement("img",{className:"thumbnail",alt:"thumb",src:t}):o.a.createElement(S,null)},N=(n(165),n(93)),P=n.n(N),x=n(41),I=n.n(x),F=function(e){var t=e.children;return o.a.createElement("div",{className:"clipping"},t)},U=function(e){var t=e.children;return o.a.createElement("div",{className:"header"},t)},T=function(e){var t=e.children;return o.a.createElement("span",{className:"title"},t)},D=function(e){e.children;var t=e.active,n=e.onClick;return o.a.createElement("span",{onClick:n,className:"favorite"},t?o.a.createElement(I.a,{style:{color:"darkred"}}):o.a.createElement(P.a,{style:{color:"darkred"}}))},V=function(e){var t=e.children;return o.a.createElement("span",{className:"author"},"by ",t)},R=function(){return o.a.createElement("div",{className:"separator"})},L=function(e){var t=e.children;return o.a.createElement("div",{className:"content"},t)},B=function(e){var t=e.children;return o.a.createElement("span",{className:"location"},"(Location ",t,")")},A=function(e){function t(){return Object(f.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"shouldComponentUpdate",value:function(e){return!(e.id===this.props.id&&e.showThumbnail===this.props.showThumbnail)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.thumbnailUrl,a=(e.showThumbnail,e.title),r=e.authors,i=e.content,c=e.loc,l=e.toggleFavorite,s=e.isInFavorite;return o.a.createElement(F,null,o.a.createElement(U,null,o.a.createElement(C,{thumbnailUrl:n,title:a,author:r[0]}),o.a.createElement(T,null,a,o.a.createElement(V,null,r[0])),o.a.createElement(D,{active:s,onClick:function(){return l(t)}}),o.a.createElement(R,null)),o.a.createElement(L,null,i,o.a.createElement(B,null,c.split("-")[0])))}}]),t}(i.Component),z=n(94),W=n.n(z),M=n(95),$=(n(208),Object(M.virtualize)(W.a)),J=function(e){var t=e.thumbnails,n=e.currentIndex,a=e.randomClippings,r=e.onChangeIndex,i=e.settings,c=e.toggleFavorite,l=e.favorites,s=e.showOnlyFavorites,u=i.books,m=(i.randomSeed,a.filter(function(e){var t=e.title;return u[t].show}).filter(s?function(e){var t=e.id;return!!l[t]}:function(){return!0}));if(0===m.length)return o.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},o.a.createElement("div",{style:{margin:100,textAlign:"center"}},"Aucun surlignements trouv\xe9s, allez dans la section r\xe9glages pour en importer"));return o.a.createElement($,{enableMouseEvents:!0,resistance:!0,slideCount:m.length,onChangeIndex:r,index:Math.max(0,n),slideRenderer:function(e){e.key;var n=e.index;if(n<0||n>m.length-1)return null;var a=m[n],r=a.title,i=a.authors,s=a.content,u=a.loc,g=a.id;return o.a.createElement(A,{id:g,key:g,thumbnailUrl:t[r+"->"+i[0]],title:r,authors:i,content:s,loc:u,toggleFavorite:c,isInFavorite:l[g]})}})},X=n(241),q=n(242),G=n(96),H=n.n(G),K=n(97),Q=n.n(K),Y=(n(209),function(e){var t=e.currentView,n=e.setCurrentView;return o.a.createElement(X.a,{value:t,onChange:function(e,t){n(t)},showLabels:!0,className:"navigation"},o.a.createElement(q.a,{label:"Surlignements",icon:o.a.createElement(H.a,null),value:"highlights"}),o.a.createElement(q.a,{label:"Favoris",value:"favorites",icon:o.a.createElement(I.a,null)}),o.a.createElement(q.a,{label:"R\xe9glages",value:"settings",icon:o.a.createElement(Q.a,null)}))}),Z=(n(27),n(30)),_=n(105),ee=n(58),te=n.n(ee),ne=n(40),ae=n.n(ne),re=n(248),ie=n(243),oe=n(3),ce=n(98),le=n.n(ce),se=n(100),ue=n.n(se),me=n(101),ge=n.n(me),fe=n(102),pe=n.n(fe),he=n(244),de=n(245),be=n(247),ve=n(246),Oe=n(99),ye=n.n(Oe),Ee={success:le.a,warning:ye.a,error:ue.a,info:ge.a},we=Object(ie.a)(function(e){return{success:{backgroundColor:he.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:de.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}});var je=function(e){var t=we(),n=e.className,a=e.message,r=e.onClose,i=e.variant,c=(e.onCloseButtonClick,Object(Z.a)(e,["className","message","onClose","variant","onCloseButtonClick"])),l=Ee[i];return o.a.createElement(ve.a,Object.assign({className:Object(oe.a)(t[i],n),"aria-describedby":"client-snackbar",message:o.a.createElement("span",{id:"client-snackbar",className:t.message},o.a.createElement(l,{className:Object(oe.a)(t.icon,t.iconVariant)}),a),action:[o.a.createElement(be.a,{key:"close","aria-label":"close",color:"inherit",onClick:r},o.a.createElement(pe.a,{className:t.icon}))]},c))},ke=n(221),Se=n(109),Ce=Object(ie.a)(function(e){return{root:{padding:e.spacing(3,2),margin:e.spacing(1)}}});function Ne(e){var t=e.header,n=e.children,a=Ce();return o.a.createElement("div",null,o.a.createElement(ke.a,{className:a.root},o.a.createElement(Se.a,{variant:"h5",component:"h3"},t),o.a.createElement(Se.a,{component:"div"},n)))}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(215);var Ie=Object(ie.a)(function(e){return{button:{margin:e.spacing(1)},rightIcon:{marginBottom:-7,marginLeft:e.spacing(1)},iconSmall:{fontSize:20},margin:{margin:e.spacing(1)}}}),Fe=function(e){e.setSettings;var t=e.setState,n=e.settings,a=e.thumbnails,r=e.updateThumbnails,i=n.isShowUploadSuccessfull;console.log({isShowUploadSuccessfull:i});var c=Ie();return o.a.createElement(Ne,{header:"Import des Clippings"},o.a.createElement("form",null,o.a.createElement(re.a,{variant:"contained",color:"primary",className:c.button},o.a.createElement("label",{htmlFor:"fileupload"},'Charger le fichier "My Clippings.txt"',o.a.createElement(ae.a,{className:c.rightIcon}))),o.a.createElement("input",{className:"inputFile",id:"fileupload",type:"file",onChange:function(e){var i=e.target.files[0],o=new FileReader;o.addEventListener("load",function(e){var i=function(e){return te()(e,"fr")}(e.target.result).map(function(e){var t=e.title,n=e.author,a=e.loc;return xe({title:t,author:n,loc:a},Object(Z.a)(e,["title","author","loc"]),{id:"".concat(t,".").concat(a)})}),o=function(e){for(var t=e.map(function(e){return e.title}),n=e.reduce(function(e,t){var n=t.title,a=t.authors;return e[n]={title:n,author:a[0]},e},{}),a={},r=0,i=Object(_.a)(new Set(t));r<i.length;r++){var o=i[r];a[o]={title:o,author:n[o].author,show:!0}}return a}(i),c=i.map(function(e){return[Math.random(),e]}).sort(function(e,t){return e[0]-t[0]}).map(function(e){return e[1]});t({clippings:i,randomClippings:c,settings:xe({},n,{books:o,isShowUploadSuccessfull:!0}),currentIndex:0});for(var l=function(){var e=u[s],t=e.title,n=e.author,i=t+"->"+n;k(a,t,n,function(e){r(i,e)})},s=0,u=Object.values(o);s<u.length;s++)l()}),o.readAsText(i)}})),i&&o.a.createElement(je,{variant:"success",className:c.margin,message:"Import r\xe9ussi !",onClose:function(){return t({settings:xe({},n,{isShowUploadSuccessfull:!1})})}}))},Ue=n(103),Te=n.n(Ue),De=Object(ie.a)(function(e){return{button:{margin:e.spacing(1)},rightIcon:{marginLeft:e.spacing(1)},iconSmall:{fontSize:20},margin:{margin:e.spacing(1)}}}),Ve=function(e){var t=e.resetState,n=De();return o.a.createElement(Ne,{header:"R\xe9initialiser l'application"},o.a.createElement(re.a,{onClick:t,variant:"contained",color:"secondary",className:n.button},"R\xe9initialiser tous les r\xe9glages",o.a.createElement(Te.a,{className:n.rightIcon})))},Re=n(4),Le=n(249),Be=n(251),Ae=Object(Re.a)(function(e){return{root:{width:42,height:29,padding:0,margin:e.spacing(1),display:"flex",justifyContent:"space-between"},switchBase:{padding:1,"&$checked":{transform:"translateX(16px)",color:e.palette.common.white,"& + $track":{backgroundColor:"#52d869",opacity:1,border:"none",height:26}},"&$focusVisible $thumb":{color:"#52d869",border:"6px solid #fff"}},thumb:{width:24,height:24},track:{borderRadius:13,border:"1px solid ".concat(e.palette.grey[400]),backgroundColor:e.palette.grey[50],opacity:1,height:25,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{}}})(function(e){var t=e.classes,n=Object(Z.a)(e,["classes"]);return o.a.createElement(Be.a,Object.assign({focusVisibleClassName:t.focusVisible,disableRipple:!0,classes:{root:t.root,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked}},n))}),ze=Object(ie.a)(function(e){return{label:{width:"100%"}}});function We(e){var t=e.checked,n=e.onChange,a=e.label,r=ze();return o.a.createElement(Le.a,{style:{width:"100%"},control:o.a.createElement(Ae,{checked:t,onChange:function(){return n(!t)},value:"checkedB"}),labelPlacement:"start",label:a,classes:{label:r.label}})}n(218);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Je=function(e,t){var n=e.title.toLowerCase(),a=t.title.toLowerCase();return n<a?-1:n>a?1:0},Xe=function(e){var t=e.title,n=e.author,a=e.thumbnailUrl;return o.a.createElement("div",null,o.a.createElement(C,{title:t,author:n,thumbnailUrl:a}),o.a.createElement("div",{className:"title"},t))},qe=function(e){var t=e.books,n=void 0===t?{}:t,a=e.setSettings,i=e.thumbnails;return o.a.createElement(Ne,{header:"Livres affich\xe9s"},Object.values(n).sort(Je).map(function(e){return o.a.createElement(We,{key:e.title,checked:e.show,label:o.a.createElement(Xe,{title:e.title,author:e.author,thumbnailUrl:i[e.title+"->"+e.author]}),onChange:(t=e.title,c=e,function(e){var i=$e({},c,{show:e}),o=Object(r.a)({},t,i);a({books:$e({},n,{},o)})})});var t,c}))},Ge=Object(ie.a)(function(e){return{button:{margin:e.spacing(1)},rightIcon:{marginBottom:-7,marginLeft:e.spacing(1)},iconSmall:{fontSize:20},margin:{margin:e.spacing(1)}}}),He=function(e){var t=e.clippings,n=e.setState,a=Ge();return o.a.createElement(Ne,{header:"Surlignements al\xe9atoires"},o.a.createElement(re.a,{onClick:function(e){var a=t.map(function(e){return[Math.random(),e]}).sort(function(e,t){return e[0]-t[0]}).map(function(e){return e[1]});n({randomClippings:a,currentIndex:0,currentView:"highlights"})},variant:"contained",color:"primary",className:a.button},"Voir les surlignements en al\xe9atoire"))},Ke=n(104),Qe=n.n(Ke),Ye=Object(ie.a)(function(e){return{container:{display:"flex",justifyContent:"center"},button:{margin:e.spacing(1)},rightIcon:{marginBottom:-7,marginLeft:e.spacing(1)},iconSmall:{fontSize:20},margin:{margin:e.spacing(1)}}}),Ze=function(e){e.clippings,e.setState;var t=Ye();return o.a.createElement("div",{className:t.container},o.a.createElement(re.a,{onClick:function(){return document.location.reload(!0)},variant:"contained",color:"primary",className:t.button},"Recharger l'application",o.a.createElement(Qe.a,{className:t.rightIcon})))};function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tt={isShowUploadSuccessfull:!1},nt=function(e){for(var t=e.setState,n=e.resetState,a=e.settings,r=void 0===a?tt:a,i=e.thumbnails,c=e.updateThumbnails,l=e.clippings,s=function(e){t({settings:et({},r,{},e)})},u=r.books,m=void 0===u?{}:u,g=function(){var e=p[f],t=e.title,n=e.author,a=t+"->"+n;k(i,t,n,function(e){c(a,e)})},f=0,p=Object.values(m);f<p.length;f++)g();return o.a.createElement("div",{className:"settings"},o.a.createElement("h1",null,"R\xe9glages"),o.a.createElement(Fe,{settings:r,setState:t,setSettings:s,updateThumbnails:c,thumbnails:i}),o.a.createElement(He,{clippings:l,setState:t}),o.a.createElement(qe,{books:m,setSettings:s,thumbnails:i}),o.a.createElement(Ze,null),o.a.createElement(Ve,{resetState:n}),o.a.createElement("div",null,"version ","1.0.8"))};function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var it={clippings:[],randomClippings:[],currentIndex:0,currentIndexFavorite:0,thumbnails:{},currentView:"highlights",favorites:{},settings:{books:{},randomSeed:0}},ot=rt({},it,{},u.a.get("state"));function ct(e,t){var n=rt({},e);switch(t.type){case"resetState":n=it;break;case"setState":n=rt({},n,{},t.args);break;case"toggleFavorite":var a=t.id,i=!!n.favorites[a],o=rt({},n.favorites,Object(r.a)({},a,!i));console.log({favorites:o}),n=rt({},n,{favorites:o});break;case"setThumbnail":n=rt({},n,{thumbnails:rt({},e.thumbnails,Object(r.a)({},t.key,t.thumbnailUrl))})}return setTimeout(function(){return u.a.set("state",n)},500),n}var lt=document.getElementById("root");l.a.render(o.a.createElement(function(){var e=Object(i.useReducer)(ct,ot),t=Object(a.a)(e,2),n=t[0],c=t[1],l=n.clippings,s=n.randomClippings,u=n.currentIndex,m=n.thumbnails,g=n.currentView,f=n.currentIndexFavorite,p=n.favorites,h=function(e){c({type:"setState",args:e})},d=function(e){c({type:"toggleFavorite",id:e})},b=function(e){console.log({currentIndex:e}),h({currentIndex:e})},v=function(e){h({currentIndexFavorite:e})},O=function(){console.log("state reset"),c({type:"resetState"})},y=function(e,t){c({type:"setThumbnail",key:e,thumbnailUrl:t})};return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"view"},o.a.createElement(function(){switch(g){case"settings":return o.a.createElement(nt,Object(r.a)({setState:h,resetState:O,settings:n.settings,clippings:n.clippings,thumbnails:m,updateThumbnails:y},"clippings",l));case"highlights":return o.a.createElement(J,{thumbnails:m,randomClippings:s,currentIndex:u,updateThumbnails:y,onChangeIndex:b,settings:n.settings,favorites:p,toggleFavorite:d});case"favorites":return o.a.createElement(J,{thumbnails:m,randomClippings:s,currentIndex:f,updateThumbnails:y,onChangeIndex:v,settings:n.settings,favorites:p,toggleFavorite:d,showOnlyFavorites:!0});default:return null}},null)),o.a.createElement(Y,{currentView:g,setCurrentView:function(e){return h({currentView:e})}}))},null),lt),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");m?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):g(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):g(t,e)})}}()},27:function(e,t,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.9930607a.chunk.js.map